
const settingsString = `[


{
  "SKLA": {
    "min": 0,
    "max": 0
  },
  "SKLB": {
    "min": 0,
    "max": 0
  },
  "SKLD": {
    "min": 0,
    "max": 0
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": 1000,
    "max": 1000
  },
  "SKLB": {
    "min": 0,
    "max": 0
  },
  "SKLD": {
    "min": 0,
    "max": 0
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": 0,
    "max": 0
  },
  "SKLB": {
    "min": 0,
    "max": 0
  },
  "SKLD": {
    "min": 0,
    "max": 0
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": 0,
    "max": 0
  },
  "SKLB": {
    "min": 0,
    "max": 0
  },
  "SKLD": {
    "min": 660,
    "max": 660
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "640",
    "max": "1000"
  },
  "SKLB": {
    "min": 0,
    "max": 0
  },
  "SKLD": {
    "min": 0,
    "max": 0
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "640",
    "max": "1000"
  },
  "SKLB": {
    "min": "810",
    "max": "1000"
  },
  "SKLD": {
    "min": 0,
    "max": 0
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "690",
    "max": "1000"
  },
  "SKLB": {
    "min": 0,
    "max": 0
  },
  "SKLD": {
    "min": "480",
    "max": "480"
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "690",
    "max": "900"
  },
  "SKLB": {
    "min": "620",
    "max": "620"
  },
  "SKLD": {
    "min": "540",
    "max": "580"
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},


{
  "SKLA": {
    "min": "480",
    "max": "1000"
  },
  "SKLB": {
    "min": "0",
    "max": "0"
  },
  "SKLD": {
    "min": "390",
    "max": "640"
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "0",
    "max": "610"
  },
  "SKLB": {
    "min": "1000",
    "max": "1000"
  },
  "SKLD": {
    "min": "430",
    "max": "580"
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},


{
  "SKLA": {
    "min": "0",
    "max": "760"
  },
  "SKLB": {
    "min": "0",
    "max": "0"
  },
  "SKLD": {
    "min": "320",
    "max": "490"
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},



{
  "SKLA": {
    "min": "650",
    "max": "760"
  },
  "SKLB": {
    "min": "0",
    "max": "0"
  },
  "SKLD": {
    "min": "0",
    "max": "810"
  },
  "TRMA": {
    "min": "0",
    "max": "0"
  },
  "TRMB": {
    "min": "1000",
    "max": "1000"
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "650",
    "max": "760"
  },
  "SKLB": {
    "min": "1000",
    "max": "1000"
  },
  "SKLD": {
    "min": "0",
    "max": "340"
  },
  "TRMA": {
    "min": "0",
    "max": "0"
  },
  "TRMB": {
    "min": "1000",
    "max": "1000"
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},



{
  "SKLA": {
    "min": "650",
    "max": "760"
  },
  "SKLB": {
    "min": "0",
    "max": "1000"
  },
  "SKLD": {
    "min": "0",
    "max": "340"
  },
  "TRMA": {
    "min": "0",
    "max": "0"
  },
  "TRMB": {
    "min": "1000",
    "max": "1000"
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "660",
    "max": "1000"
  },
  "SKLB": {
    "min": "0",
    "max": "0"
  },
  "SKLD": {
    "min": "0",
    "max": "0"
  },
  "TRMA": {
    "min": "0",
    "max": "0"
  },
  "TRMB": {
    "min": "0",
    "max": "0"
  },
  "TRMC": {
    "min": "1000",
    "max": "1000"
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "660",
    "max": "1000"
  },
  "SKLB": {
    "min": "740",
    "max": "740"
  },
  "SKLD": {
    "min": "0",
    "max": "0"
  },
  "TRMA": {
    "min": "0",
    "max": "0"
  },
  "TRMB": {
    "min": "0",
    "max": "0"
  },
  "TRMC": {
    "min": "0",
    "max": "0"
  },
  "TRMD": {
    "min": "1000",
    "max": "1000"
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},


{
  "SKLA": {
    "min": "660",
    "max": "1000"
  },
  "SKLB": {
    "min": "740",
    "max": "740"
  },
  "SKLD": {
    "min": "340",
    "max": "450"
  },
  "TRMA": {
    "min": "0",
    "max": "0"
  },
  "TRMB": {
    "min": "0",
    "max": "0"
  },
  "TRMC": {
    "min": "0",
    "max": "0"
  },
  "TRMD": {
    "min": "1000",
    "max": "1000"
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},



{
  "SKLA": {
    "min": "0",
    "max": "400"
  },
  "SKLB": {
    "min": "0",
    "max": "0"
  },
  "SKLD": {
    "min": "480",
    "max": "480"
  },
  "TRMA": {
    "min": "0",
    "max": "0"
  },
  "TRMB": {
    "min": "0",
    "max": "0"
  },
  "TRMC": {
    "min": "0",
    "max": "0"
  },
  "TRMD": {
    "min": "1000",
    "max": "1000"
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},



{
  "SKLA": {
    "min": "340",
    "max": "770"
  },
  "SKLB": {
    "min": "0",
    "max": "0"
  },
  "SKLD": {
    "min": "480",
    "max": "570"
  },
  "TRMA": {
    "min": "0",
    "max": "0"
  },
  "TRMB": {
    "min": "0",
    "max": "0"
  },
  "TRMC": {
    "min": "0",
    "max": "0"
  },
  "TRMD": {
    "min": "0",
    "max": "0"
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "440",
    "max": "770"
  },
  "SKLB": {
    "min": "540",
    "max": "740"
  },
  "SKLD": {
    "min": "480",
    "max": "570"
  },
  "TRMA": {
    "min": "0",
    "max": "0"
  },
  "TRMB": {
    "min": "1000",
    "max": "1000"
  },
  "TRMC": {
    "min": "0",
    "max": "0"
  },
  "TRMD": {
    "min": "0",
    "max": "0"
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": 0,
    "max": 0
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": "1000"
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},




{
  "SKLA": {
    "min": "0",
    "max": 0
  },
  "SKLB": {
    "min": "1000",
    "max": "1000"
  },
  "SKLD": {
    "min": "520",
    "max": "510"
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": "0",
    "max": 0
  },
  "TRMC": {
    "min": "0",
    "max": 0
  },
  "TRMD": {
    "min": "1000",
    "max": "1000"
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": "0",
    "max": "440"
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "1000",
    "max": "1000"
  },
  "SKLB": {
    "min": "700",
    "max": "820"
  },
  "SKLD": {
    "min": 0,
    "max": 0
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": 0,
    "max": 0
  },
  "TRMD": {
    "min": "0",
    "max": "0"
  },
  "TRME": {
    "min": "0",
    "max": "1000"
  },
  "TRMF": {
    "min": "0",
    "max": "350"
  },
  "TRMG": {
    "min": "0",
    "max": "0"
  },
  "TRMK": {
    "min": "0",
    "max": 0
  },
  "TRML": {
    "min": "0",
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "0",
    "max": "0"
  },
  "SKLB": {
    "min": "1000",
    "max": "1000"
  },
  "SKLD": {
    "min": "350",
    "max": "490"
  },
  "TRMA": {
    "min": 0,
    "max": "0"
  },
  "TRMB": {
    "min": 0,
    "max": "0"
  },
  "TRMC": {
    "min": "1000",
    "max": "1000"
  },
  "TRMD": {
    "min": "0",
    "max": "0"
  },
  "TRME": {
    "min": "0",
    "max": "1000"
  },
  "TRMF": {
    "min": 0,
    "max": "320"
  },
  "TRMG": {
    "min": 0,
    "max": 0
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},


{
  "SKLA": {
    "min": "0",
    "max": "0"
  },
  "SKLB": {
    "min": "1000",
    "max": "1000"
  },
  "SKLD": {
    "min": "350",
    "max": "570"
  },
  "TRMA": {
    "min": 0,
    "max": "0"
  },
  "TRMB": {
    "min": 0,
    "max": "0"
  },
  "TRMC": {
    "min": "1000",
    "max": "1000"
  },
  "TRMD": {
    "min": "0",
    "max": "0"
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": "300",
    "max": "320"
  },
  "TRMG": {
    "min": "1000",
    "max": "1000"
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "0",
    "max": "0"
  },
  "SKLB": {
    "min": "1000",
    "max": "1000"
  },
  "SKLD": {
    "min": "350",
    "max": "570"
  },
  "TRMA": {
    "min": 0,
    "max": "0"
  },
  "TRMB": {
    "min": 0,
    "max": "0"
  },
  "TRMC": {
    "min": "1000",
    "max": "1000"
  },
  "TRMD": {
    "min": "0",
    "max": "0"
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": "300",
    "max": "320"
  },
  "TRMG": {
    "min": "1000",
    "max": "1000"
  },
  "TRMK": {
    "min": "0",
    "max": "0"
  },
  "TRML": {
    "min": "0",
    "max": "1000"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},


{
  "SKLA": {
    "min": "630",
    "max": "1000"
  },
  "SKLB": {
    "min": "0",
    "max": "0"
  },
  "SKLD": {
    "min": "0",
    "max": "0"
  },
  "TRMA": {
    "min": 0,
    "max": "0"
  },
  "TRMB": {
    "min": 0,
    "max": "0"
  },
  "TRMC": {
    "min": "0",
    "max": "0"
  },
  "TRMD": {
    "min": "1000",
    "max": "1000"
  },
  "TRME": {
    "min": "0",
    "max": "1000"
  },
  "TRMF": {
    "min": "0",
    "max": "0"
  },
  "TRMG": {
    "min": "0",
    "max": "0"
  },
  "TRMK": {
    "min": "0",
    "max": "0"
  },
  "TRML": {
    "min": "1000",
    "max": "1000"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "630",
    "max": "1000"
  },
  "SKLB": {
    "min": "0",
    "max": "580"
  },
  "SKLD": {
    "min": "0",
    "max": "520"
  },
  "TRMA": {
    "min": 0,
    "max": "0"
  },
  "TRMB": {
    "min": 0,
    "max": "0"
  },
  "TRMC": {
    "min": "0",
    "max": "0"
  },
  "TRMD": {
    "min": "1000",
    "max": "1000"
  },
  "TRME": {
    "min": "0",
    "max": "1000"
  },
  "TRMF": {
    "min": "0",
    "max": "0"
  },
  "TRMG": {
    "min": "0",
    "max": "0"
  },
  "TRMK": {
    "min": "0",
    "max": "0"
  },
  "TRML": {
    "min": "1000",
    "max": "1000"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},


{
  "SKLA": {
    "min": "0",
    "max": "660"
  },
  "SKLB": {
    "min": "1000",
    "max": "1000"
  },
  "SKLD": {
    "min": "480",
    "max": "520"
  },
  "TRMA": {
    "min": 0,
    "max": "0"
  },
  "TRMB": {
    "min": 0,
    "max": "0"
  },
  "TRMC": {
    "min": "0",
    "max": "0"
  },
  "TRMD": {
    "min": "1000",
    "max": "1000"
  },
  "TRME": {
    "min": "0",
    "max": "1000"
  },
  "TRMF": {
    "min": "0",
    "max": "230"
  },
  "TRMG": {
    "min": "0",
    "max": "0"
  },
  "TRMK": {
    "min": "0",
    "max": "0"
  },
  "TRML": {
    "min": "1000",
    "max": "1000"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": 0,
    "max": "0"
  },
  "SKLB": {
    "min": 0,
    "max": "0"
  },
  "SKLD": {
    "min": "110",
    "max": "220"
  },
  "TRMA": {
    "min": 0,
    "max": "0"
  },
  "TRMB": {
    "min": "400",
    "max": "430"
  },
  "TRMC": {
    "min": "0",
    "max": "0"
  },
  "TRMD": {
    "min": "0",
    "max": "1000"
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": 0,
    "max": "0"
  },
  "TRMG": {
    "min": 0,
    "max": "0"
  },
  "TRMK": {
    "min": "780",
    "max": "1000"
  },
  "TRML": {
    "min": "680",
    "max": "1000"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},


{
  "SKLA": {
    "min": "0",
    "max": 0
  },
  "SKLB": {
    "min": 0,
    "max": 0
  },
  "SKLD": {
    "min": "0",
    "max": "480"
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": 0,
    "max": "0"
  },
  "TRMD": {
    "min": 0,
    "max": 0
  },
  "TRME": {
    "min": 0,
    "max": 0
  },
  "TRMF": {
    "min": "570",
    "max": "570"
  },
  "TRMG": {
    "min": 0,
    "max": "0"
  },
  "TRMK": {
    "min": 0,
    "max": 0
  },
  "TRML": {
    "min": 0,
    "max": "0"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},


{
  "SKLA": {
    "min": 0,
    "max": "0"
  },
  "SKLB": {
    "min": "1000",
    "max": "1000"
  },
  "SKLD": {
    "min": 0,
    "max": "1000"
  },
  "TRMA": {
    "min": 0,
    "max": "0"
  },
  "TRMB": {
    "min": 0,
    "max": "1000"
  },
  "TRMC": {
    "min": "1000",
    "max": "1000"
  },
  "TRMD": {
    "min": 0,
    "max": "0"
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": "0",
    "max": "0"
  },
  "TRMG": {
    "min": 0,
    "max": "0"
  },
  "TRMK": {
    "min": "1000",
    "max": "1000"
  },
  "TRML": {
    "min": 0,
    "max": "0"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": 0,
    "max": "0"
  },
  "SKLB": {
    "min": "1000",
    "max": "1000"
  },
  "SKLD": {
    "min": "1000",
    "max": "1000"
  },
  "TRMA": {
    "min": 0,
    "max": "0"
  },
  "TRMB": {
    "min": 0,
    "max": "1000"
  },
  "TRMC": {
    "min": "1000",
    "max": "1000"
  },
  "TRMD": {
    "min": 0,
    "max": "0"
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": "0",
    "max": "0"
  },
  "TRMG": {
    "min": 0,
    "max": "0"
  },
  "TRMK": {
    "min": "1000",
    "max": "1000"
  },
  "TRML": {
    "min": 0,
    "max": "0"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},


{
  "SKLA": {
    "min": "700",
    "max": "700"
  },
  "SKLB": {
    "min": 0,
    "max": "650"
  },
  "SKLD": {
    "min": "630",
    "max": "680"
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": "1000"
  },
  "TRMC": {
    "min": "0",
    "max": "340"
  },
  "TRMD": {
    "min": "1000",
    "max": "1000"
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": 0,
    "max": "330"
  },
  "TRMG": {
    "min": "1000",
    "max": "1000"
  },
  "TRMK": {
    "min": 0,
    "max": "50"
  },
  "TRML": {
    "min": "590",
    "max": "1000"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},


{
  "SKLA": {
    "min": "0",
    "max": "0"
  },
  "SKLB": {
    "min": 0,
    "max": "650"
  },
  "SKLD": {
    "min": "630",
    "max": "680"
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": "1000"
  },
  "TRMC": {
    "min": "0",
    "max": "340"
  },
  "TRMD": {
    "min": "1000",
    "max": "1000"
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": 0,
    "max": "330"
  },
  "TRMG": {
    "min": "1000",
    "max": "1000"
  },
  "TRMK": {
    "min": 0,
    "max": "50"
  },
  "TRML": {
    "min": "590",
    "max": "1000"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},


{
  "SKLA": {
    "min": "1000",
    "max": "1000"
  },
  "SKLB": {
    "min": "1000",
    "max": "1000"
  },
  "SKLD": {
    "min": "520",
    "max": "520"
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": 0,
    "max": 0
  },
  "TRMC": {
    "min": "0",
    "max": "1000"
  },
  "TRMD": {
    "min": 0,
    "max": "0"
  },
  "TRME": {
    "min": 0,
    "max": "1000"
  },
  "TRMF": {
    "min": 0,
    "max": "320"
  },
  "TRMG": {
    "min": 0,
    "max": "1000"
  },
  "TRMK": {
    "min": 0,
    "max": "0"
  },
  "TRML": {
    "min": 0,
    "max": "0"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},




{
  "SKLA": {
    "min": "1000",
    "max": "1000"
  },
  "SKLB": {
    "min": "1000",
    "max": "1000"
  },
  "SKLD": {
    "min": "0",
    "max": "0"
  },
  "TRMA": {
    "min": "0",
    "max": "0"
  },
  "TRMB": {
    "min": 0,
    "max": "0"
  },
  "TRMC": {
    "min": "0",
    "max": "0"
  },
  "TRMD": {
    "min": "1000",
    "max": "1000"
  },
  "TRME": {
    "min": "0",
    "max": "0"
  },
  "TRMF": {
    "min": "150",
    "max": "150"
  },
  "TRMG": {
    "min": "0",
    "max": "0"
  },
  "TRMK": {
    "min": "0",
    "max": "0"
  },
  "TRML": {
    "min": "1000",
    "max": "1000"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "620",
    "max": "620"
  },
  "SKLB": {
    "min": "1000",
    "max": "1000"
  },
  "SKLD": {
    "min": "420",
    "max": "420"
  },
  "TRMA": {
    "min": 0,
    "max": "0"
  },
  "TRMB": {
    "min": "1000",
    "max": "1000"
  },
  "TRMC": {
    "min": "1000",
    "max": "1000"
  },
  "TRMD": {
    "min": 0,
    "max": "0"
  },
  "TRME": {
    "min": "0",
    "max": "1000"
  },
  "TRMF": {
    "min": "640",
    "max": "640"
  },
  "TRMG": {
    "min": "0",
    "max": "0"
  },
  "TRMK": {
    "min": 0,
    "max": "0"
  },
  "TRML": {
    "min": 0,
    "max": "0"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": 0,
    "max": 0
  },
  "SKLB": {
    "min": "1000",
    "max": "1000"
  },
  "SKLD": {
    "min": "550",
    "max": "550"
  },
  "TRMA": {
    "min": 0,
    "max": "0"
  },
  "TRMB": {
    "min": "1000",
    "max": "1000"
  },
  "TRMC": {
    "min": "1000",
    "max": "1000"
  },
  "TRMD": {
    "min": 0,
    "max": "0"
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": "330",
    "max": "360"
  },
  "TRMG": {
    "min": "1000",
    "max": "1000"
  },
  "TRMK": {
    "min": 0,
    "max": "0"
  },
  "TRML": {
    "min": 0,
    "max": "0"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},


{
  "SKLA": {
    "min": "1000",
    "max": "1000"
  },
  "SKLB": {
    "min": "0",
    "max": "0"
  },
  "SKLD": {
    "min": "440",
    "max": "440"
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": "0",
    "max": "0"
  },
  "TRMC": {
    "min": "0",
    "max": "0"
  },
  "TRMD": {
    "min": 0,
    "max": "0"
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": "0",
    "max": "210"
  },
  "TRMG": {
    "min": "0",
    "max": "1000"
  },
  "TRMK": {
    "min": 0,
    "max": "0"
  },
  "TRML": {
    "min": 0,
    "max": "0"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},

{
  "SKLA": {
    "min": "1000",
    "max": "1000"
  },
  "SKLB": {
    "min": "0",
    "max": 0
  },
  "SKLD": {
    "min": "0",
    "max": 0
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": "1000",
    "max": "1000"
  },
  "TRMC": {
    "min": "0",
    "max": 0
  },
  "TRMD": {
    "min": "0",
    "max": 0
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": "0",
    "max": 0
  },
  "TRMG": {
    "min": "0",
    "max": 0
  },
  "TRMK": {
    "min": "0",
    "max": "1000"
  },
  "TRML": {
    "min": "0",
    "max": 0
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
},


{
  "SKLA": {
    "min": "1000",
    "max": "1000"
  },
  "SKLB": {
    "min": "0",
    "max": "1000"
  },
  "SKLD": {
    "min": "530",
    "max": "590"
  },
  "TRMA": {
    "min": 0,
    "max": 0
  },
  "TRMB": {
    "min": "1000",
    "max": "1000"
  },
  "TRMC": {
    "min": "0",
    "max": 0
  },
  "TRMD": {
    "min": "0",
    "max": "0"
  },
  "TRME": {
    "min": "1000",
    "max": "1000"
  },
  "TRMF": {
    "min": "0",
    "max": "450"
  },
  "TRMG": {
    "min": "0",
    "max": "0"
  },
  "TRMK": {
    "min": "0",
    "max": "0"
  },
  "TRML": {
    "min": "0",
    "max": "0"
  },
  "BLDA": {
    "min": 0,
    "max": 0
  },
  "BLDB": {
    "min": 0,
    "max": 0
  }
}]`;

const settings = JSON.parse(settingsString);
const s = {
  currentProps: {},
  color: {
    loop: 0,
    lMin: 80,
    lMax: 100,
    cMin: 10,
    cMax: 24,
    hMin: 0,
    hMax: 360,
  },
  font: {
    loop: 0,
  },
  current: {},
};

export default class {
  async bittyInit() {
    initVars();
    addBaseStyleSheet();
  }

  loadInput(_event, el) {
    const spanMaker = new SpanMaker(el.innerText);
    this.spans = spanMaker.makeParagraphs().makeWords().makeSpans().output();
    this.api.forward(null, "inputPayload");
  }

  inputPayload(_event, el) {
    el.innerHTML = this.spans;
  }

  async startUpdaters(_event, _el) {
    updateFonts();
    updateColors();
  }
}

async function updateFonts() {
  setProp(`--font-transition`, `6000ms`);
  if (s.font.loop === 0) {
    setFontTo(0);
  } else {
    setFontTo(randomInt(0, listOfVars().length - 1));
  }
  await sleep(6700);
  s.font.loop += 1;
  updateFonts();
}

async function updateColors() {
  if (s.color.loop <= 3) {
    setProp(`--color-transition`, `4000ms`);
    s.color.cMin = 10 + (s.color.loop * 5);
    s.color.cMax = 14 + (20 * s.color.loop);
  } else {
    s.color.cMin = 0;
    s.color.cMax = 140;
  }
  const chroma = randomInt(s.color.cMin, s.color.cMax);
  for (let char of listOfLetters()) {
    // gotta sleep otherwise chrome batches
    // the updates in oneshot
    await sleep(10);
    const lKey = `--color-l-${char}`;
    const lValue = `${randomInt(86, 96)}%`;
    setProp(lKey, lValue);
    const cKey = `--color-c-${char}`;
    const cValue = chroma;
    setProp(cKey, cValue);
    const hKey = `--color-h-${char}`;
    const hValue = randomInt(0, 360);
    setProp(hKey, hValue);
  }
  await sleep(5200);
  s.color.loop += 1;
  updateColors();
}

async function setFontTo(fontIndex) {
  for (let v of listOfVars()) {
    const key = `--${v}`;
    const value = settings[fontIndex][v]["min"];
    setProp(key, value);
  }
}

function addBaseStyleSheet() {
  const css = new CSSStyleSheet();
  let styles = [];
  const variations = listOfVars().map((variation) => {
    const varString = `"${variation}" var(--${variation})`;
    return varString;
  });
  styles.push(`.letter, .letter-alt {`);

  // styles.push(
  //   `color: lch(var(--color-l) var(--color-c) var(--color-h) );`,
  // );
  styles.push(`transition:`);
  styles.push(`color var(--color-transition)`);
  styles.push(`,`);
  styles.push(
    `font-variation-settings var(--font-transition)`,
  );
  styles.push(`;`);
  styles.push(`font-variation-settings: `);
  styles.push(variations.join(","));
  styles.push(";");
  styles.push("} ");
  for (let char of listOfLetters()) {
    styles.push(`.letter-${char} {`);
    styles.push(`font-size: var(--font-size-${char});`);
    styles.push(
      `color: lch(var(--color-l-${char}) var(--color-c-${char}) var(--color-h-${char}) );`,
    );

    // styles.push(`transition:`);
    // styles.push(`color var(--color-transition)`);
    // styles.push(`;`);

    // styles.push(`transition:`);
    // styles.push(`color var(--color-transition)`);
    // styles.push(`,`);
    // styles.push(
    //   `font-variation-settings var(--font-transition)`,
    // );
    // styles.push(`;`);

    styles.push("}");
  }
  // for (let char of listOfLetters()) {
  //   const variations = listOfVars().map((variation) => {
  //     const varString = `"${variation}" var(--${variation}-${char})`;
  //     return varString;
  //   });
  //   styles.push(`.letter-${char} {`);
  //   styles.push(`font-size: var(--font-size-${char});`);
  //   styles.push(
  //     `color: lch(var(--color-l-${char}) var(--color-c-${char}) var(--color-h-${char}) );`,
  //   );
  //   styles.push(`transition:`);
  //   //    styles.push(`color var(--color-transition-${char}) var(--color-easing),`);
  //   styles.push(
  //     `font-variation-settings var(--font-transition-${char});`,
  //   );
  //   styles.push(`font-variation-settings: `);
  //   styles.push(variations.join(","));
  //   styles.push(";");
  //   styles.push("}");
  // }
  const output = styles.join("\n");
  // console.log(`STYLESHEET: ${output}`);
  css.replaceSync(output);
  document.adoptedStyleSheets.push(css);
}

async function setProp(key, value) {
  if (s.currentProps[key] !== value) {
    // var bodyStyles = window.getComputedStyle(document.body);
    //  var currentValue = bodyStyles.getPropertyValue(key);
    // if (currentValue !== value) {
    //console.log(`setProp(${key}, ${value}`);
    document.documentElement.style.setProperty(
      key,
      value,
    );
  }
  //}
}

async function initVars() {
  setProp(
    `--background-transition`,
    `4000ms`,
  );
  setProp(`--color-easing`, `linear`);
  setProp(`--background-easing`, `linear`);
  setProp(`--color-transition`, `6000ms`);
  setProp(`--font-transition`, `5000ms`);
  for (let v of listOfVars()) {
    setProp(`--${v}`, 0);
  }

  for (let char of listOfLetters()) {
    setProp(`--font-size-${char}`, `${randomFloat(1.7, 2.9)}rem`);
    setProp(`--color-l-${char}`, `0%`);
    setProp(`--color-c-${char}`, 0);
    setProp(`--color-h-${char}`, 0);
  }

  // for (let char of listOfLetters()) {
  //   setProp(`--font-size-${char}`, `${randomFloat(1.7, 2.9)}rem`);
  //   setProp(`--color-l-${char}`, `90%`);
  //   setProp(`--color-c-${char}`, 70);
  //   setProp(`--color-h-${char}`, 100);
  //   setProp(`--color-transition-${char}`, 1200);
  //   setProp(`--font-transition-${char}`, `5200ms`);
  //   for (let v of listOfVars()) {
  //     setProp(`--${v}-${char}`, 500);
  //   }
  // }
}

function listOfLetters() {
  const letters = [...Array(26)].map((_, i) =>
    String.fromCharCode("a".charCodeAt(0) + i)
  );
  shuffleArray(letters);
  return letters;
}

function shuffleArray(array) {
  let currentIndex = array.length;
  let randomIndex;
  while (currentIndex != 0) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;
    [array[currentIndex], array[randomIndex]] = [
      array[randomIndex],
      array[currentIndex],
    ];
  }
}

function listOfVars() {
  return Object.keys(settings[0]);
}

function sleep(ms) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}

function randomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1) + min);
}

function randomFloat(min, max) {
  return (Math.random() * (max - min)) + min;
}

// async function switchToSingleFont(fontIndex, minMax, shiftTimeMs, padTimeMs) {
//   console.log(
//     `switchToSingleFont(${fontIndex}, ${minMax}, ${shiftTimeMs}, ${padTimeMs})`,
//   );
//   for (let letter of arrayOfLetters()) {
//     await sleep(padTimeMs);
//     switchLetterToFont(letter.char, fontIndex, minMax, shiftTimeMs);
//   }
// }

//async function switchLetterToFont(char, fontIndex, minMax, shiftTimeMs) {
//  if (char === "a") {
//    console.log(state.letters[char]);
//  }
//  if (char === "a" || char === "d") {
//    console.log(
//      `switchLetterToFont(${char}, ${fontIndex}, ${minMax}, ${shiftTimeMs})`,
//    );
//  }
//  Object.entries(settings[fontIndex]).forEach(([prefix, details]) => {
//    state.letters[char].props[prefix] = details[minMax];
//  });
//  if (char === "a") {
//    console.log(state.letters[char]);
//  }
//  //applyUpdates();
//}

//async function doRun() {
//  // pickColors();
//  // pickShapes();
//  pickBackground();
//  //pickSize();
//  // console.log(settings.length);
//  // arrayOfLetters().forEach((letter) => {
//  //   updateLetterWithRandomSetting(letter.char);
//  // });
//  // await sleep(100);
//  // applyUpdates();
//}

// async function pickSize() {
//   arrayOfLetters().forEach((letter) => {
//     if (randomInt(0, 2) === 2) {
//       setProp(letter.char, "font-size", randomFloat(1.9, 2.7));
//     }
//   });
//   await sleep(4000);
//   pickSize();
// }

// async function pickShapes() {
//   arrayOfLetters().forEach((letter) => {
//     if (randomInt(0, 2) === 2) {
//       updateLetterWithRandomSetting(letter.char);
//     }
//   });
//   applyUpdates();
//   await sleep(4800);
//   pickShapes();
// }

// function setBackgroundTransition(ms) {
//   state.misc["background-transition"] = ms;
//   document.documentElement.style.setProperty(
//     `--background-transition`,
//     `${state.misc["background-transition"]}ms`,
//   );
// }

// function updateLetterWithRandomSetting(char) {
//   const setting = randomInt(0, settings.length - 1);
//   arrayOfLetters().forEach((letter) => {
//     if (letter.char === char) {
//       // console.log(char);
//       // console.log(setting);
//       // console.log(settings[setting]);
//       Object.entries(settings[setting]).forEach(([x, y]) => {
//         const min = parseInt(y.min, 10);
//         const max = parseInt(y.max, 10);
//         const value = randomInt(min, max);
//         setProp(char, x, value);
//       });
//     }
//   });
// }

// async function xdoRun() {
//   await sleep(100);
//   setAllOfType("color-transition", 9000);
//   setAllOfType("font-transition", 3600);
//   setAllOfType("size-transition", 9200);
//   applyUpdates();
//   await sleep(100);
//   pickColors();
//   pickShapes();
//   pickBackground();
//   // pickSizes();
// }

// async function resizeLetters(count) {
//   for (let i = 0; i < count; i++) {
//     resizeRandomLetter();
//   }
// }

// async function resizeRandomLetter() {
//   const index = randomInt(0, 25);
//   const char = arrayOfLetters()[index].char;
//   setProp(char, "font-size", randomFloat(1.5, 3));
// }

// async function pickBackground() {
//   document.documentElement.style.setProperty(
//     `--background-l`,
//     `${randomInt(0, 12)}%`,
//   );
//   document.documentElement.style.setProperty(
//     `--background-c`,
//     randomInt(0, 80),
//   );
//   document.documentElement.style.setProperty(
//     `--background-h`,
//     randomInt(0, 360),
//   );
//   await sleep(state.misc["background-transition"] + 400);
//   pickBackground();
// }

// async function pickColors() {
//   applyUpdates();
//   generateSeed("color-l", 90, 100);
//   generateSeed("color-c", 40, 120);
//   generateSeed("color-h", 0, 360);
//   prepAllFromSeed("color", "large");
//   applyUpdates();
//   await sleep(9800);
//   pickColors();
// }

// async function xpickShapes() {
//   setAllOfType("font-transition", 600);
//   pickOne("font-s", 200, 700);
//   pickOne("font-t", 300, 900);
//   pickOne("font-t2", 400, 800);
//   pickOne("font-t2", 400, 800);
//   pickOne("font-t2", 400, 800);
//   applyUpdates();
//   await sleep(1000);
//   pickShapes();
// }

// async function prepSomeFromSeed(type, distance) {
//   arrayOfLetters().forEach((letter) => {
//     if (randomInt(30, 40) === 20) {
//       // console.log(`prepSeomFromSeed: ${letter.char}`);
//       arrayOfSeeds(type).forEach((seed) => {
//         const value = randomShift(
//           seed.next_value,
//           seed.min,
//           seed.max,
//           seed.moves[distance],
//           randomDirection(),
//         );
//         setProp(letter.char, seed.prefix, value);
//       });
//     }
//   });
// }

//async function shiftLoop() {
//  loopCount += 1;
//  pickOne("font-t");
//  if (loopCount % 5 === 0) {
//    generateSeeds("font", 500, 700);
//    // generateRandomSeeds("font-t");
//    shiftSeed("color-h", "small");
//    prepAllFromSeed("color", "xsmall");
//    //generateSeed("color-c", 70, 180);
//  } else {
//    generateSeeds("font", 100, 200);
//    generateSeed("color-h", 0, 360);
//    prepAllFromSeed("color", "default");
//  }
//  shiftSeed("color-c", "xlarge");
//  prepAllFromSeed("font", "default");
//  applyUpdates();
//  await sleep(5200);
//  shiftLoop();
//}

// function setAllFontsToSize(size) {
//   arrayOfLetters().forEach((letter) => {
//     // console.log(letter.char);
//     setProp(letter.char, "font-size", size);
//   });
// }

// function pickOne(type, min, max) {
//   const pick = randomInt(0, arrayOfSeeds(type).length - 1);
//   arrayOfLetters().forEach((letter) => {
//     if (randomInt(0, 1) === 1) {
//       arrayOfSeeds(type).forEach((seed, index) => {
//         // console.log(letter.char);
//         // console.log(seed.prefix);
//         if (index === pick) {
//           setProp(letter.char, seed.prefix, randomInt(min, max));
//         }
//       });
//     }
//   });
// }

// function shiftSeed(prefix, amount) {
//   seedTypes().forEach((type) => {
//     arrayOfSeeds(type).forEach((seed) => {
//       if (prefix === seed.prefix) {
//         setSeed(
//           prefix,
//           randomShift(
//             seed.next_value,
//             seed.min,
//             seed.max,
//             seed.moves[amount],
//             randomDirection(),
//           ),
//         );
//       }
//     });
//   });
// }

// function propUnit(prefix) {
//   for (let type of seedTypes()) {
//     for (let seed of arrayOfSeeds(type)) {
//       if (seed.prefix === prefix) {
//         return seed.unit;
//       }
//     }
//   }
// }

// async function applyUpdates() {
//   // This sets transition times first
//   // then runs the rest to make sure
//   // everything applies with the proper
//   // timing. Could stand to dedup the loop
//   // but it's fine for now.
//   const transitionPrefixes = [
//     "color-transition",
//     "font-transition",
//     "shape-transition",
//   ];
//   arrayOfLetters().forEach((letter) => {
//     seedTypes().forEach((type) => {
//       arrayOfSeeds(type).forEach((seed) => {
//         if (
//           letter.props[seed.prefix].previous_value !==
//             getNextPrefixValue(letter.char, seed.prefix)
//         ) {
//           if (transitionPrefixes.includes(seed.prefix)) {
//             const key = `--${seed.prefix}-${letter.char}`;
//             const value = `${letter.props[seed.prefix].next_value}${
//               propUnit(seed.prefix)
//             }`;
//             // if (letter.char === "a") {
//             //   console.log(`applyUpdates: ${key} - ${value}`);
//             // }
//             document.documentElement.style.setProperty(
//               key,
//               value,
//             );
//             letter.props[seed.prefix].previous_value = getNextPrefixValue(
//               letter.char,
//               seed.prefix,
//             );
//           }
//         }
//       });
//     });
//   });
//   // add 100 ms sleep to make sure transitions
//   // updates have applied
//   await sleep(100);
//   arrayOfLetters().forEach((letter) => {
//     seedTypes().forEach((type) => {
//       arrayOfSeeds(type).forEach((seed) => {
//         if (
//           letter.props[seed.prefix].previous_value !==
//             getNextPrefixValue(letter.char, seed.prefix)
//         ) {
//           if (!transitionPrefixes.includes(seed.prefix)) {
//             const key = `--${seed.prefix}-${letter.char}`;
//             const value = `${letter.props[seed.prefix].next_value}${
//               propUnit(seed.prefix)
//             }`;
//             // if (letter.char === "a") {
//             //   console.log(`applyUpdates: ${key} - ${value}`);
//             // }
//             document.documentElement.style.setProperty(
//               key,
//               value,
//             );
//             letter.props[seed.prefix].previous_value = getNextPrefixValue(
//               letter.char,
//               seed.prefix,
//             );
//           }
//         }
//       });
//     });
//   });
//   //
// }

//function seedTypes() {
//  const seedTypeSet = new Set();
//  Object.entries(state.seeds).forEach(([_, seed]) => {
//    seedTypeSet.add(seed.type);
//    //console.log(seed.type);
//  });
//  return [...seedTypeSet];
//  //console.log(seedTypeSet);
//  // console.log(state.seeds);
//  //return ["color", "color-transition", "font", "font-transition"];
//}

// function randomShift(position, min, max, distance, direction) {
//   // console.log(`${position} ${min} ${max} ${base} ${direction}`);
//   const move = randomInt(0, distance);
//   for (let count = 0; count < Math.abs(move); count += 1) {
//     position += direction;
//     if (position >= max) {
//       direction = -1;
//     } else if (position <= min) {
//       direction = 1;
//     }
//   }
//   return position;
// }

// function randomDirection() {
//   return randomInt(0, 1) === 1 ? 1 : -1;
// }

// function prepAllFromSeed(type, distance) {
//   arrayOfLetters().forEach((letter) => {
//     arrayOfSeeds(type).forEach((seed) => {
//       const value = randomShift(
//         seed.next_value,
//         seed.min,
//         seed.max,
//         seed.moves[distance],
//         randomDirection(),
//       );
//       setProp(letter.char, seed.prefix, value);
//     });
//   });
// }

// function matchTransitionSeeds() {
//   state.seeds["font-transition"].previous_value = getNextSeedValue(
//     "font-transition",
//   );
//   state.seeds["font-transition"].next_value = getNextSeedValue(
//     "color-transition",
//   );
// }

// function setSeed(prefix, value) {
//   state.seeds[prefix].previous_value = getNextSeedValue(prefix);
//   state.seeds[prefix].next_value = value;
// }

// function getNextSeedValue(prefix) {
//   // Necessary to pull values out instead of
//   // getting a reference.
//   return state.seeds[prefix].next_value;
// }

// function getNextPrefixValue(char, prefix) {
//   // Necessary to pull values out instead of
//   // getting a reference.
//   return state.letters[char].props[prefix].next_value;
// }

// function setAllOfPrefix(prefix, value) {
//   arrayOfLetters().forEach((letter) => {
//     setProp(letter.char, prefix, value);
//   });
// }

// function setAllOfType(type, value) {
//   arrayOfSeeds(type).forEach((seed) => {
//     arrayOfLetters().forEach((letter) => {
//       setProp(letter.char, seed.prefix, value);
//     });
//   });
// }

// function generateRandomSeed(prefix, min, max) {
//   // setSeed(prefix));
// }

// function generateRandomSeeds(type, min, max) {
//   arrayOfSeeds(type).forEach((seed) => {
//     generateRandomSeed(seed.prefix, min, max);
//   });
// }

//function generateSeed(prefix, min, max) {
//  //console.log(prefix);
//  setSeed(prefix, randomInt(min, max));
//}

// function generateSeeds(type, min, max) {
//   arrayOfSeeds(type).forEach((seed) => {
//     generateSeed(seed.prefix, min, max);
//   });
// }

// function arrayOfSeeds(type) {
//   return Object.entries(state.seeds).filter(([prefix, details]) => {
//     return details.type === type;
//   }).map(([prefix, details]) => {
//     return details;
//   });
// }

// function arrayOfLetters() {
//   return Object.entries(state.letters).map(([char, letter]) => letter);
// }

// function fontVariations(char) {
//   const prefixes = [];
//   arrayOfSeeds("font-s").forEach((seed) => {
//     prefixes.push(seed.prefix);
//   });
//   arrayOfSeeds("font-t").forEach((seed) => {
//     prefixes.push(seed.prefix);
//   });
//   arrayOfSeeds("font-t2").forEach((seed) => {
//     prefixes.push(seed.prefix);
//   });
//   const output = prefixes.map((prefix) => {
//     return `"${prefix}" var(--${prefix}-${char})`;
//   });
//   return (output.join(",\n"));
// }

//function initWithZeros() {
//  arrayOfLetters().forEach((letter) => {
//    Object.entries(letter.props).forEach(([prefix, details]) => {
//      setProp(letter.char, prefix, 10);
//      //details.next_value = 0;
//      // const key = `--${prefix}-${letter.char}`;
//      // const value = `0${propUnit(prefix)}`;
//      // document.documentElement.style.setProperty(
//      //   key,
//      //   value,
//      // );
//    });
//  });
//}

// function setProp(char, prefix, value) {
//   if (char === "a") {
//     console.log(`setProp(${char}, ${prefix}, ${value})`);
//   }
//   state.letters[char].props[prefix].previous_value = getNextPrefixValue(
//     char,
//     prefix,
//   );
//   state.letters[char].props[prefix].next_value = value;
// }

//   async x_startUpdates(_event, el) {
//     // await sleep(100);
//     // setAllOfType("color-transition", 1700);
//     // setAllOfType("font-transition", 5200);
//     // setAllOfType("size-transition", 200);
//     // applyUpdates();
//     // generateSeed("color-l", 89, 100);
//     // generateSeed("color-c", 10, 15);
//     // generateSeed("color-h", 0, 360);
//     // prepAllFromSeed("color", "default");
//     // applyUpdates();
//     // await sleep(100);
//     // arrayOfLetters().forEach((letter) => {
//     //   updateLetterWithRandomSetting(letter.char);
//     // });
//     // setAllOfPrefix("SKLD", 200);
//     // setAllOfPrefix("TRMF", 200);
//     // setAllOfPrefix("TRMK", 200);
//     // setAllOfPrefix("TRML", 200);
//     // await sleep(600);
//     // doRun();
//   }

// async x_bittyInit() {
//   // initWithZeros();
//   // addBaseStyleSheet();
//   // setAllOfType("color-transition", 0);
//   // setAllOfType("font-transition", 0);
//   // setAllOfType("size-transition", 0);
//   // setBackgroundTransition(8000);
//   // setAllOfPrefix("font-size", 2.9);
//   // setAllOfPrefix("color-l", 0);
//   // setAllOfPrefix("color-c", 0);
//   // setAllOfPrefix("color-h", 0);
//   // resizeLetters(30);
//   // // switchToSingleFont(0, "min", 0, 0);
//   // applyUpdates();
// }

// function addBaseStyleSheet() {
//   const stylesSheet = new CSSStyleSheet();
//   let styles = [];
//   styles.push(`.output {
//     font-size: var(--font-size-q);
//     color: lch(var(--color-l-q) var(--color-c-q) var(--color-h-q) );
//     transition:
//       color var(--color-transition-q) var(--color-easing),
//       font-variation-settings var(--font-transition-q) var(--font-easing);
//     font-variation-settings:
//       ${fontVariations("q")};
// }`);
//   arrayOfLetters().forEach((details) => {
//     const letter = details.char;
//     styles.push(`.letter-${letter} {
//         font-size: var(--font-size-${letter});
//         color: lch(var(--color-l-${letter}) var(--color-c-${letter}) var(--color-h-${letter}) );
//         transition:
//           color var(--color-transition-${letter}) var(--color-easing),
//           font-variation-settings var(--font-transition-${letter}) var(--font-easing);
//         font-variation-settings:
//           ${fontVariations(letter)};
// }`);
//   });
//   stylesSheet.replaceSync(styles.join("\n"));
//   document.adoptedStyleSheets.push(stylesSheet);
// }

//async function setLetterToFont(char, fontIndex, minMax, shiftTime) {
//  for (let v of listOfVars()) {
//    const timeKey = `--font-transition-${char}`;
//    const timeValue = `${shiftTime}ms`;
//    setProp(timeKey, timeValue);
//    const key = `--${v}-${char}`;
//    const value = settings[fontIndex][v][minMax];
//    setProp(key, value);
//    //console.log(`setLetterToFont: ${key} - ${value}`);
//  }
//}
const SpanMaker = class {
  constructor(text) {
    this.text = text;
    this.textParagraphs = [];
    this.wordParagraphs = [];
    this.spanParagraphs = [];
  }

  isLetter(char) {
    let code = char.charCodeAt(0);
    return (code >= 65 && code <= 90) || (code >= 97 && code <= 122);
  }

  makeParagraphs() {
    let parasIndex = 0;
    this.text.split("\n").forEach((line) => {
      if (!this.textParagraphs[parasIndex]) {
        this.textParagraphs.push("");
      }
      if (line.trim() === "") {
        parasIndex += 1;
      } else {
        this.textParagraphs[parasIndex] += `${line} `;
        // console.log(`LINE: ${line}`);
      }
    });
    return this;
  }

  makeWords() {
    // The word split was originally done so spans
    // could be switch to `display: inline-block` to
    // allow them to be rotated. Decided against
    // the rotation after playing with a little,
    // but leaving the word split in anyway.
    this.wordParagraphs = this.textParagraphs.map((para) => {
      return para
        //.replaceAll(`"`, "")
        // .replaceAll(`?`, "")
        // .replaceAll(`-`, " ")
        // .replaceAll(`)`, "")
        // .replaceAll(`(`, "")
        .replaceAll(/\s\s+/g, " ").split(" ");
    });
    return this;
  }

  makeSpans() {
    this.spanParagraphs = this.wordParagraphs.map((para) => {
      let content = para.map((word) => {
        let content2 = [
          `<div class="word">`,
          word.trim().split("").map((char) => {
            if (this.isLetter(char)) {
              return [
                `<span class="letter letter-`,
                char.toLowerCase(),
                `">`,
                char,
                `</span>`,
              ].join("");
            } else {
              return [
                `<span class="letter-alt letter-q">`,
                char,
                `</span>`,
              ].join("");
            }
          }).join(""),
          `</div>`,
        ].join("");
        return content2;
      }).join(``);
      return content;
    });
    return this;
  }

  output() {
    return `<div class="pAlt">${
      this.spanParagraphs.join(
        '</div><div class="pAlt">',
      )
    }</div>`;
  }
};

// Hey there!
//
// Welcome to the code! This project involved a lot
// of prototyping. There's a bunch of
// cruft left over from that. Other than that
// the big thing to know is that this I'm
// using bitty for this `https://bitty.alanwsmith.com`.
// It's the first real thing I've built with it.
// Helped me refine a bunch. I really like
// the way it's working.
